/*! For license information please see module.js.LICENSE.txt */
define(["react","d3","emotion","@grafana/ui","@grafana/data"],(function(e,t,n,r,o){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=5)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t,n){"use strict";n.r(t);var r=n(4);function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function a(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var i,l,u,c,s=n(0),f=n.n(s),d=n(2),p=n(3),m=n(1),v=function(e,t){var n=function(e){return Math.round(e)},r=e.reduce((function(e,t){var n=t[0],r=t[1];return null!==r&&(e.x+=n,e.y+=r,e.squareX+=n*n,e.product+=n*r,e.len+=1),e}),{x:0,y:0,squareX:0,product:0,len:0}),o=r.len*r.product-r.x*r.y,a=r.len*r.squareX-r.x*r.x,i=0===a?0:n(o/a),l=n(r.y/r.len-i*r.x/r.len);return n(i*t+l)},h=Object(p.stylesFactory)((function(){return{wrapper:Object(d.css)(l||(l=a(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(d.css)(u||(u=a(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),textBox:Object(d.css)(c||(c=a(["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "],["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "])))}}));n.d(t,"plugin",(function(){return g}));var g=new r.PanelPlugin((function(e){e.options;var t=e.data,n=e.width,r=e.height,l=o(Object(s.useState)([]),2),u=l[0],c=l[1],g=o(Object(s.useState)([]),2),b=g[0],x=g[1],y=h();console.log(y);var w=Object(s.useRef)(null),O=o(Object(s.useState)(6e4),2),j=O[0],S=O[1],P=o(Object(s.useState)(),2),D=P[0],E=P[1];Object(s.useEffect)((function(){E([{label:"1 minute",description:"Forcast 1 minutes",value:6e4},{label:"10 minutes",description:"Forcast 10 minutes",value:6e5},{label:"60 minutes",description:"Forcast 60 minutes",value:36e5}])}),[]),Object(s.useEffect)((function(){var e,t;if(console.log("selectVal : ",j),console.log("timeseries?.length: ",null===(e=u)||void 0===e?void 0:e.length),w.current&&(null===(t=u)||void 0===t?void 0:t.length)>0){var o=u.map((function(e){return{date:e}})),a=b.map((function(e,t){return{date:new Date(o[t].date),volume:e}})),i=u.map((function(e){var t,n;return{myDate:u[u.length-1]+(null===(n=null===(t=D)||void 0===t?void 0:t.find((function(e){return e.value===j})))||void 0===n?void 0:n.value)}})),l=b.map((function(e,t){return[t,e]})),c=i.map((function(e,t){var n=e.myDate;return{date:new Date(n),volume:v(l,l.length-1+t)}})).concat({date:new Date(u[u.length-1]),volume:b[b.length-1]}),s=m.select("#mychart");s.select("svg > *").remove();var f={top:20,right:5,bottom:10,left:5},d=n-f.left-f.right,p=r-f.top-f.bottom,h=s.append("g").attr("transform","translate("+f.left+" "+f.top+")"),g=m.scaleTime().rangeRound([0,d]),x=m.scaleLinear().rangeRound([p,0]),y=m.line().x((function(e){return g(e.date)})).y((function(e){return x(e.volume)}));g.domain([m.min(a,(function(e){return e.date})),m.max(c,(function(e){return e.date}))]),x.domain([m.min(a,(function(e){return e.volume})),m.max(a,(function(e){return e.volume}))]),h.append("g").attr("transform","translate(0 "+p+")").call(m.axisBottom(g)),h.append("g").call(m.axisLeft(x)).append("text").attr("fill","#fff").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("Target Value"),h.append("path").datum(a).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",4.5).attr("d",y),h.append("path").datum(c).attr("fill","none").attr("stroke","tomato").attr("stroke-dasharray","10,7").attr("stroke-width",5.5).attr("d",y)}}),[n,r,j]);return console.log("width : ",n),console.log("height : ",r),f.a.createElement("div",{className:Object(d.cx)(y.wrapper,Object(d.css)(i||(i=a(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),n,r))},f.a.createElement("h3",null,"Select time interval what you want"),f.a.createElement(p.Select,{options:D,placeholder:"Select time interval to forcast",onChange:function(e){return function(e){var n,r;console.log("target value index : ",e),S(e),c(null===(n=t.series[0])||void 0===n?void 0:n.fields[0].values.toArray()),x(null===(r=t.series[0])||void 0===r?void 0:r.fields[1].values.toArray())}(e.value)}}),f.a.createElement("svg",{id:"mychart",width:n,height:r-57,viewBox:"-1 -1 "+n+" "+(r+10),ref:w},f.a.createElement("g",{fill:"red"})))})).setPanelOptions((function(e){return e.addTextInput({path:"text",name:"Simple text option",description:"Description of panel option",defaultValue:"Default value of text input option"}).addBooleanSwitch({path:"showSeriesCount",name:"Show series counter",defaultValue:!1}).addRadio({path:"seriesCountSize",defaultValue:"sm",name:"Series counter size",settings:{options:[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]},showIf:function(e){return e.showSeriesCount}})}))}])}));
//# sourceMappingURL=module.js.map