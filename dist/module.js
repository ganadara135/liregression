/*! For license information please see module.js.LICENSE.txt */
define(["react","d3","emotion","@grafana/ui","@grafana/data"],(function(t,e,n,r,o){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=5)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=o},function(t,e,n){"use strict";n.r(e);var r=n(4);function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return u}function a(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var u,i,l,c,s=n(0),f=n.n(s),d=n(2),p=n(3),m=n(1),v=function(t,e){var n=function(t){return Math.round(t)},r=t.reduce((function(t,e){var n=e[0],r=e[1];return null!==r&&(t.x+=n,t.y+=r,t.squareX+=n*n,t.product+=n*r,t.len+=1),t}),{x:0,y:0,squareX:0,product:0,len:0}),o=r.len*r.product-r.x*r.y,a=r.len*r.squareX-r.x*r.x,u=0===a?0:n(o/a),i=n(r.y/r.len-u*r.x/r.len);return n(u*e+i)},b=Object(p.stylesFactory)((function(){return{wrapper:Object(d.css)(i||(i=a(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(d.css)(l||(l=a(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),textBox:Object(d.css)(c||(c=a(["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "],["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "])))}}));n.d(e,"plugin",(function(){return h}));var h=new r.PanelPlugin((function(t){t.options;var e=t.data,n=t.width,r=t.height,i=o(Object(s.useState)([]),2),l=i[0],c=i[1],h=o(Object(s.useState)([]),2),x=h[0],g=h[1],y=b(),O=Object(s.useRef)(null),j=o(Object(s.useState)(6e4),2),w=j[0],S=j[1],P=o(Object(s.useState)(),2),D=P[0],E=P[1];Object(s.useEffect)((function(){E([{label:"1분",description:"Forcast 1 minutes",value:6e4},{label:"10분",description:"Forcast 10 minutes",value:6e5},{label:"60분",description:"Forcast 60 minutes",value:36e5}])}),[]),Object(s.useEffect)((function(){if(console.log("selectVal : ",w),O.current&&l.length>0){var t=l.map((function(t){return{date:t}})),e=x.map((function(e,n){return{date:new Date(t[n].date),volume:e}})),o=l.map((function(t){var e,n;return{myDate:l[l.length-1]+(null===(n=null===(e=D)||void 0===e?void 0:e.find((function(t){return t.value===w})))||void 0===n?void 0:n.value)}})),a=x.map((function(t,e){return[e,t]})),u=o.map((function(t,e){var n=t.myDate;return{date:new Date(n),volume:v(a,a.length-1+e)}})).concat({date:new Date(l[l.length-1]),volume:x[x.length-1]});m.selectAll("svg > *").remove();var i=m.select("#chart"),c={top:20,right:20,bottom:30,left:70},s=n-c.left-c.right,f=r-c.top-c.bottom-30,d=i.append("g").attr("transform","translate("+c.left+" "+c.top+")"),p=m.scaleTime().rangeRound([0,s]),b=m.scaleLinear().rangeRound([f,0]),h=m.line().x((function(t){return p(t.date)})).y((function(t){return b(t.volume)}));p.domain([m.min(e,(function(t){return t.date})),m.max(u,(function(t){return t.date}))]),b.domain([m.min(e,(function(t){return t.volume})),m.max(e,(function(t){return t.volume}))]),d.append("g").attr("transform","translate(0 "+f+")").call(m.axisBottom(p)),d.append("g").call(m.axisLeft(b)).append("text").attr("fill","#fff").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("측정값"),d.append("path").datum(e).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",4.5).attr("d",h),d.append("path").datum(u).attr("fill","none").attr("stroke","tomato").attr("stroke-dasharray","10,7").attr("stroke-width",5.5).attr("d",h)}}),[n,r,w]);return f.a.createElement("div",{className:Object(d.cx)(y.wrapper,Object(d.css)(u||(u=a(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),n,r))},f.a.createElement("h3",null,"예측할 시간 간격을 선택하세요"),f.a.createElement(p.Select,{options:D,placeholder:"예측 시간 선택",onChange:function(t){return function(t){var n,r;console.log("target value index : ",t),S(t),c(null===(n=e.series[0])||void 0===n?void 0:n.fields[0].values.toArray()),g(null===(r=e.series[0])||void 0===r?void 0:r.fields[1].values.toArray())}(t.value)}}),f.a.createElement("svg",{id:"chart",width:n,height:r,viewBox:"-1 -1 "+n+" "+r,ref:O},f.a.createElement("g",null)))})).setPanelOptions((function(t){return t.addTextInput({path:"text",name:"Simple text option",description:"Description of panel option",defaultValue:"Default value of text input option"}).addBooleanSwitch({path:"showSeriesCount",name:"Show series counter",defaultValue:!1}).addRadio({path:"seriesCountSize",defaultValue:"sm",name:"Series counter size",settings:{options:[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]},showIf:function(t){return t.showSeriesCount}})}))}])}));
//# sourceMappingURL=module.js.map